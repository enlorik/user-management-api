# ── DATABASE ─────────────────────────────────────────────────────────────────
spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}?sslmode=require
spring.datasource.username=${PGUSER}
spring.datasource.password=${PGPASSWORD}

# ── JPA / Hibernate ─────────────────────────────────────────────────────────
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# ── EMAIL (Resend API - Production) ────────────────────────────────────────
# Production email is handled via Resend API (see EmailService.java)
# These environment variables must be set in Railway:
# - RESEND_API_KEY: Your Resend API key
# - RESEND_FROM: Sender email address (e.g., "User Management <onboarding@resend.dev>")
resend.api.key=${RESEND_API_KEY}
resend.from=${RESEND_FROM}

# ── MAIL (SMTP - Legacy/Optional) ───────────────────────────────────────────
# Spring Mail SMTP configuration (optional, not used in production)
# If you need SMTP fallback, set these environment variables:
spring.mail.host=${SPRING_MAIL_HOST:smtp.example.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:user@example.com}
spring.mail.password=${SPRING_MAIL_PASSWORD:password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.from=${SPRING_MAIL_FROM:user@example.com}

# ── LOGGING ─────────────────────────────────────────────────────────────────
logging.level.org.springframework.mail=DEBUG
logging.level.com.empress.usermanagementapi.service.EmailService=DEBUG

# ── ACTUATOR (Health Check) ─────────────────────────────────────────────────
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true
# Disable mail health check to prevent false negatives when mail server is unreachable
# The application can still function without mail for most operations
management.health.mail.enabled=false

# IDK BUT IT WORKS
